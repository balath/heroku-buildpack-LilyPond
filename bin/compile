# bin/compile
#!/bin/bash

BUILD_DIR=$1

echo "-----> Downloading LilyPond"
curl -L -o lilypond.sh http://lilypond.org/download/binaries/linux-64/lilypond-2.18.2-1.linux-64.sh

echo "-----> Installing LilyPond"
sh lilypond.sh --prefix=$BUILD_DIR --batch

# AsegÃºrate de que el binario se encuentra en el directorio correcto
if [ -d "$BUILD_DIR/bin" ]; then
  echo 'export PATH="$PATH:$BUILD_DIR/bin"' >> $BUILD_DIR/.profile.d/lilypond.sh
else
  echo 'export PATH="$PATH:$BUILD_DIR/lilypond-2.18.2/bin"' >> $BUILD_DIR/.profile.d/lilypond.sh
fi

echo "-----> Testing LilyPond"
$BUILD_DIR/lilypond-2.18.2/bin/lilypond --version
